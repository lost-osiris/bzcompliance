{
  "faults": [],
  "bugs": [
    {
      "cf_qe_conditional_nak": [],
      "classification": "Red Hat",
      "cf_pm_score": "0",
      "estimated_time": "0.0",
      "depends_on": [
        "1029380"
      ],
      "cf_story_points": "---",
      "cf_conditional_nak": [],
      "creation_time": "20131112T10:16:00",
      "actual_time": "0.0",
      "docs_contact": "",
      "is_open": "True",
      "keywords": [
        "ZStream"
      ],
      "summary": "Limit the head length of skb allocated for tun/macvtap",
      "external_bugs": [],
      "id": "1029381",
      "cf_release_notes": "Prior to this update, a guest-provided value was used as the head length of the socket buffer allocated on the host. If the host was under heavy memory load and the guest-provided value was too large, the allocation could have failed, resulting in stalls and packet drops in the guest's Tx path. With this update, the guest-provided value has been limited to a reasonable size so that socket buffer allocations on the host succeed regardless of the memory load on the host, and guests can send packets without experiencing packet drops or stalls.",
      "priority": "unspecified",
      "severity": "unspecified",
      "is_confirmed": "True",
      "is_creator_accessible": "True",
      "cf_fixed_in": "kernel-2.6.32-459.el6",
      "creator": "jasowang@redhat.com",
      "comments": [
        {
          "count": "0",
          "creator": "jasowang@redhat.com",
          "text": "+++ This bug was initially created as a clone of Bug #1029380 +++\n\nDescription of problem:\n\nWe currently use the hdr_len which is advertised by guest as the head length of host skb allocated for tun/macvtap. If guest advertise a very larger value (64K), host will then try to using kmalloc() to allocate another skb with 64K. This has a very high possibility of failure when host memory was fragmented or under heavy stress.\n\nSo we should limit the headlen. \n\nVersion-Release number of selected component (if applicable):\n\n\nHow reproducible:\n100%\n\nSteps to Reproduce:\n1. stress the host memory (e.g. using stress --vm N --vm-keep)\n2. send a packet from guest to host with very large hdr_len ( I reproduce with artifically linearize the skb in guest driver)\n3. Wait for a while and stop the stress in host\n\nActual results:\n1. guest tx stall and one packet were dropped could be seen in tap in host\n\nExpected results:\n1. guest can still send packets when host is under memory stress\n\nAdditional info:",
          "author": "jasowang@redhat.com",
          "creation_time": "20131112T10:16:50",
          "bug_id": "1029381",
          "creator_id": "275766",
          "time": "20131112T10:16:50",
          "id": "6510848",
          "is_private": "False"
        },
        {
          "count": "1",
          "creator": "jasowang@redhat.com",
          "text": "Change back to ASSIGNED, since the patch has not been posted.",
          "author": "jasowang@redhat.com",
          "creation_time": "20140107T04:48:50",
          "bug_id": "1029381",
          "creator_id": "275766",
          "time": "20140107T04:48:50",
          "id": "6679188",
          "is_private": "False"
        },
        {
          "count": "2",
          "creator": "jasowang@redhat.com",
          "text": "http://post-office.corp.redhat.com/archives/rhkernel-list/2014-April/msg00010.html",
          "author": "jasowang@redhat.com",
          "creation_time": "20140402T03:27:49",
          "bug_id": "1029381",
          "creator_id": "275766",
          "time": "20140402T03:27:49",
          "id": "6975653",
          "is_private": "True"
        },
        {
          "count": "3",
          "creator": "aquini@redhat.com",
          "text": "Patch(es) available on kernel-2.6.32-459.el6",
          "author": "aquini@redhat.com",
          "creation_time": "20140418T15:31:25",
          "bug_id": "1029381",
          "creator_id": "309821",
          "time": "20140418T15:31:25",
          "id": "7021830",
          "is_private": "False"
        },
        {
          "count": "4",
          "creator": "aquini@redhat.com",
          "text": "List of patches present on kernel-2.6.32-459.el6:\nRelated patch: http://patchwork.lab.bos.redhat.com/patch/78852\nRelated patch: http://patchwork.lab.bos.redhat.com/patch/78853\nRelated patch: http://patchwork.lab.bos.redhat.com/patch/78854\nRelated patch: http://patchwork.lab.bos.redhat.com/patch/78855",
          "author": "aquini@redhat.com",
          "creation_time": "20140418T15:32:00",
          "bug_id": "1029381",
          "creator_id": "309821",
          "time": "20140418T15:32:00",
          "id": "7021844",
          "is_private": "True"
        },
        {
          "count": "5",
          "creator": "errata-xmlrpc@redhat.com",
          "text": "Bug report changed to ON_QA status by Errata System.\nA QE request has been submitted for advisory RHBA-2014:17605-01\nhttps://errata.devel.redhat.com/advisory/17605",
          "author": "errata-xmlrpc@redhat.com",
          "creation_time": "20140428T12:35:49",
          "bug_id": "1029381",
          "creator_id": "241731",
          "time": "20140428T12:35:49",
          "id": "7044792",
          "is_private": "True"
        },
        {
          "count": "6",
          "creator": "jkurik@redhat.com",
          "text": "This bug has been copied as 6.2 z-stream (EUS) bug #1092349 and now must be\nresolved in the current update release, set blocker flag.\n\nCopy created by jkurik@redhat.com.",
          "author": "jkurik@redhat.com",
          "creation_time": "20140429T07:05:32",
          "bug_id": "1029381",
          "creator_id": "352756",
          "time": "20140429T07:05:32",
          "id": "7047570",
          "is_private": "True"
        },
        {
          "count": "7",
          "creator": "jkurik@redhat.com",
          "text": "This bug has been copied as 6.3 z-stream (EUS) bug #1092350 and now must be\nresolved in the current update release, set blocker flag.\n\nCopy created by jkurik@redhat.com.",
          "author": "jkurik@redhat.com",
          "creation_time": "20140429T07:06:06",
          "bug_id": "1029381",
          "creator_id": "352756",
          "time": "20140429T07:06:06",
          "id": "7047577",
          "is_private": "True"
        },
        {
          "count": "8",
          "creator": "jkurik@redhat.com",
          "text": "This bug has been copied as 6.4 z-stream (EUS) bug #1092352 and now must be\nresolved in the current update release, set blocker flag.\n\nCopy created by jkurik@redhat.com.",
          "author": "jkurik@redhat.com",
          "creation_time": "20140429T07:06:32",
          "bug_id": "1029381",
          "creator_id": "352756",
          "time": "20140429T07:06:32",
          "id": "7047583",
          "is_private": "True"
        },
        {
          "count": "9",
          "creator": "jkurik@redhat.com",
          "text": "This bug has been copied as 6.5 z-stream (EUS) bug #1092353 and now must be\nresolved in the current update release, set blocker flag.\n\nCopy created by jkurik@redhat.com.",
          "author": "jkurik@redhat.com",
          "creation_time": "20140429T07:06:58",
          "bug_id": "1029381",
          "creator_id": "352756",
          "time": "20140429T07:06:58",
          "id": "7047588",
          "is_private": "True"
        }
      ],
      "cf_show_homepage": "---",
      "platform": "Unspecified",
      "version": [
        "6.5"
      ],
      "cc": [
        "chayang@redhat.com",
        "dhoward@redhat.com",
        "juzhang@redhat.com",
        "michen@redhat.com",
        "mst@redhat.com",
        "qzhang@redhat.com",
        "rhod@redhat.com",
        "stefanha@redhat.com",
        "svenkatr@redhat.com"
      ],
      "cf_verified": [],
      "cf_cust_facing": "---",
      "cf_regression_status": "---",
      "cf_environment": "",
      "status": "ON_QA",
      "product": "Red Hat Enterprise Linux 6",
      "cf_verified_branch": "",
      "blocks": [
        "1092353",
        "1092349",
        "1092350",
        "1092352"
      ],
      "qa_contact": "virt-bugs@redhat.com",
      "tags": [],
      "see_also": [],
      "component": [
        "kernel"
      ],
      "remaining_time": "0.0",
      "cf_pgm_internal": "",
      "cf_doc_type": "Bug Fix",
      "cf_clone_of": "1029380",
      "groups": [
        "private"
      ],
      "cf_documentation_action": "---",
      "cf_internal_whiteboard": "PMApproved",
      "target_milestone": "rc",
      "cf_devel_whiteboard": "",
      "is_cc_accessible": "True",
      "cf_type": "Bug",
      "cf_category": "---",
      "url": "",
      "cf_build_id": "",
      "whiteboard": "",
      "cf_crm": "",
      "target_release": [
        "---"
      ],
      "alias": [],
      "op_sys": "Unspecified",
      "flags": [
        {
          "status": "?",
          "name": "qe_test_coverage",
          "modification_date": "20131120T09:24:34",
          "type_id": "318",
          "is_active": "1",
          "creation_date": "20131120T09:24:34",
          "id": "1593899",
          "setter": "pm-rhel@redhat.com"
        },
        {
          "status": "?",
          "name": "requires_doc_text",
          "modification_date": "20140526T13:32:09",
          "type_id": "415",
          "is_active": "1",
          "creation_date": "20140526T13:32:09",
          "id": "1828799",
          "setter": "bugzilla@redhat.com"
        },
        {
          "status": "+",
          "name": "rhel-6.6.0",
          "modification_date": "20140128T15:28:37",
          "type_id": "519",
          "is_active": "1",
          "creation_date": "20131112T11:55:18",
          "id": "1583871",
          "setter": "pm-rhel@redhat.com"
        },
        {
          "status": "+",
          "name": "blocker",
          "modification_date": "20140429T07:05:36",
          "type_id": "24",
          "is_active": "1",
          "creation_date": "20140429T07:05:36",
          "id": "1797483",
          "setter": "jkurik@redhat.com"
        },
        {
          "status": "+",
          "name": "pm_ack",
          "modification_date": "20140128T15:15:17",
          "type_id": "11",
          "is_active": "1",
          "creation_date": "20131112T10:19:28",
          "id": "1583687",
          "setter": "snagar@redhat.com"
        },
        {
          "status": "+",
          "name": "devel_ack",
          "modification_date": "20131112T11:55:18",
          "type_id": "10",
          "is_active": "1",
          "creation_date": "20131112T10:19:28",
          "id": "1583688",
          "setter": "rhod@redhat.com"
        },
        {
          "status": "+",
          "name": "qa_ack",
          "modification_date": "20131120T08:57:05",
          "type_id": "9",
          "is_active": "1",
          "creation_date": "20131112T10:19:28",
          "id": "1583689",
          "setter": "juzhang@redhat.com"
        }
      ],
      "last_change_time": "20140526T13:32:09",
      "assigned_to": "jasowang@redhat.com",
      "update_token": "1403031795-TIpgKi4BLU24c0xdBlH1BCNj6nPVn6A_kKg3fRu1TY4",
      "cf_partner": [],
      "resolution": "",
      "cf_mount_type": "---",
      "cf_layered_products": []
    }
  ]
}